const h=document.querySelector(".popular-products"),g=document.querySelector(".cart-list"),I=document.querySelector(".cart-empty");let a=JSON.parse(localStorage.getItem("products"))||[],t=JSON.parse(localStorage.getItem("cartItems"))||[];const S=()=>{fetch("https://fakestoreapi.com/products").then(c=>c.json()).then(c=>{a=c,o(a)})},o=c=>{h.innerHTML="",c.forEach(e=>{const n=document.createElement("div");n.classList.add("new-product");const r=document.createElement("img");r.src=e.image,r.classList.add("new-image");const i=document.createElement("p");i.textContent=e.title,i.classList.add("new-title");const l=document.createElement("p");l.textContent=e.price+"€",l.classList.add("new-price");const s=document.createElement("button");s.classList.add("button-buy"),t.find(C=>C.id===e.id)?(s.textContent="Eliminar",s.classList.add("button-buy-click")):s.textContent="Comprar";const u=()=>{t.find(m=>m.id===e.id)?t=t.filter(m=>m.id!==e.id):t.push(e),d(t),o(c),localStorage.setItem("products",JSON.stringify(a)),localStorage.setItem("cartItems",JSON.stringify(t))};s.addEventListener("click",u),n.appendChild(r),n.appendChild(i),n.appendChild(l),n.appendChild(s),h.appendChild(n)})},d=c=>{if(g.innerHTML="",I.innerHTML="",t.length>0){const e=document.createElement("button");e.textContent="Vaciar el carrito",e.classList.add("button-buy","button-buy-click");const n=()=>{t=[],d(t),o(a),localStorage.setItem("products",JSON.stringify(a)),localStorage.setItem("cartItems",JSON.stringify(t))};e.addEventListener("click",n),I.appendChild(e)}c.forEach(e=>{const n=document.createElement("div");n.classList.add("new-cart-item");const r=document.createElement("button");r.textContent="x",r.classList.add("delete-button");const i=document.createElement("img");i.src=e.image,i.classList.add("new-image");const l=document.createElement("p");l.textContent=e.title,l.classList.add("new-title");const s=document.createElement("p");s.textContent=e.price+"€",s.classList.add("new-price");const p=()=>{t=t.filter(u=>u.id!==e.id),d(t),o(a),localStorage.setItem("products",JSON.stringify(a)),localStorage.setItem("cartItems",JSON.stringify(t))};r.addEventListener("click",p),n.appendChild(r),n.appendChild(i),n.appendChild(l),n.appendChild(s),g.appendChild(n)})};a.length===0?S():(o(a),d(t));const L=document.querySelector(".searcher--input"),E=document.querySelector(".searcher--button"),f=()=>{const c=a.filter(e=>e.title.toLowerCase().includes(L.value.toLowerCase()));o(c)};E.addEventListener("click",f);L.addEventListener("keyup",c=>{c.key==="Enter"&&f()});
//# sourceMappingURL=main.js.map
